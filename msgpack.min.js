{const e=4294967296,r=r=>{let t,n,i=new Uint8Array(128),o=0;function f(r){if(null==r)return void u(192);const i=r.constructor;(i===String?function(e){const r=function(e){let r=!0,t=e.length;for(let n=0;n<t;n++)if(e.charCodeAt(n)>127){r=!1;break}let n=0,i=new Uint8Array(e.length*(r?1:4));for(let r=0;r!==t;r++){let t=e.charCodeAt(r);if(t<128)i[n++]=t;else{if(t<2048)i[n++]=t>>6|192;else{if(t>55295&&t<56320){if(++r>=e.length)throw new Error("UTF8 encode: incomplete surrogate pair");const o=e.charCodeAt(r);if(o<56320||o>57343)throw new Error("UTF8 encode: second surrogate character 0x"+o.toString(16)+" at index "+r+" out of range");t=65536+((1023&t)<<10)+(1023&o),i[n++]=t>>18|240,i[n++]=t>>12&63|128}else i[n++]=t>>12|224;i[n++]=t>>6&63|128}i[n++]=63&t|128}}return r?i:i.subarray(0,n)}(e),t=r.length;t<=31?u(160+t):l(t<=255?[217,t]:t<=65535?[218,t>>>8,t]:[219,t>>>24,t>>>16,t>>>8,t]),l(r)}:i===Number?function(r){if(isFinite(r)&&Math.floor(r)===r){if(r>=0&&r<=127)u(r);else if(r<0&&r>=-32)u(r);else if(r>0&&r<=255)l([204,r]);else if(r>=-128&&r<=127)l([208,r]);else if(r>0&&r<=65535)l([205,r>>>8,r]);else if(r>=-32768&&r<=32767)l([209,r>>>8,r]);else if(r>0&&r<=4294967295)l([206,r>>>24,r>>>16,r>>>8,r]);else if(r>=-2147483648&&r<=2147483647)l([210,r>>>24,r>>>16,r>>>8,r]);else if(r>0&&r<=0x10000000000000000){let t=r/e,n=r%e;l([211,t>>>24,t>>>16,t>>>8,t,n>>>24,n>>>16,n>>>8,n])}else if(r>=-0x8000000000000000&&r<=0x8000000000000000){let t,n;r>=0?(t=r/e,n=r%e):(r++,t=Math.abs(r)/e,n=Math.abs(r)%e,t=~t,n=~n),l([211,t>>>24,t>>>16,t>>>8,t,n>>>24,n>>>16,n>>>8,n])}else l(r<0?[211,128,0,0,0,0,0,0,0]:[207,255,255,255,255,255,255,255,255]);return}n||(t=new ArrayBuffer(8),n=new DataView(t));n.setFloat64(0,r),u(203),l(new Uint8Array(t))}:i===Boolean?function(e){u(e?195:194)}:i===Date?function(r){let t=r.getTime()/1e3;if(0===r.getMilliseconds()&&t<4294967296)l([214,255,t>>>24,t>>>16,t>>>8,t]);else{let n=1e6*r.getMilliseconds();if(t<17179869184){let t=r.getTime()/1e3;l([215,255,n>>>22,n>>>14,n>>>6,n<<2>>>0|t/e,t>>>24,t>>>16,t>>>8,t])}else{let t=r.getTime()/1e3;hi=t/e,lo=t%e,l([199,12,255,n>>>24,n>>>16,n>>>8,n,hi>>>24,hi>>>16,hi>>>8,hi,lo>>>24,lo>>>16,lo>>>8,lo])}}}:i===Uint8Array||i===Uint8ClampedArray?function(e){const r=e.length;l(r<=15?[196,r]:r<=65535?[197,r>>>8,r]:[198,r>>>24,r>>>16,r>>>8,r]),l(e)}:i===Array||i===Int8Array||i===Int16Array||i===Int32Array||i===Uint16Array||i===Uint32Array||i===Float32Array||i===Float64Array?function(e){const r=e.length;r<=15?u(144+r):l(r<=65535?[220,r>>>8,r]:[221,r>>>24,r>>>16,r>>>8,r]);for(const r of e)f(r)}:function(e){let r=0;for(const t in e)r++;r<=15?u(128+r):l(r<=65535?[222,r>>>8,r]:[223,r>>>24,r>>>16,r>>>8,r]);for(const r in e)f(r),f(e[r])})(r)}function u(e){if(i.length<o+1){let e=2*i.length;for(;e<o+1;)e*=2;const r=new Uint8Array(e);r.set(i),i=r}i[o]=e,o++}function l(e){if(i.length<o+e.length){let r=2*i.length;for(;r<o+e.length;)r*=2;const t=new Uint8Array(r);t.set(i),i=t}i.set(e,o),o+=e.length}return f(r),i.subarray(0,o)},t=r=>{let t=0;return r instanceof Uint8Array||(r=new Uint8Array(r)),n();function n(){const e=r[t++];if(e>=0&&e<=127)return e;if(e>=128&&e<=143)return l(e-128);if(e>=144&&e<=159)return c(e-144);if(e>=160&&e<=191)return a(e-160);if(192===e)return null;if(193===e)throw new Error("Invalid byte code 0xc1 found.");if(194===e)return!1;if(195===e)return!0;if(196===e)return u(-1,1);if(197===e)return u(-1,2);if(198===e)return u(-1,4);if(199===e)return s(-1,1);if(200===e)return s(-1,2);if(201===e)return s(-1,4);if(202===e)return f(4);if(203===e)return f(8);if(204===e)return o(1);if(205===e)return o(2);if(206===e)return o(4);if(207===e)return o(8);if(208===e)return i(1);if(209===e)return i(2);if(210===e)return i(4);if(211===e)return i(8);if(212===e)return s(1);if(213===e)return s(2);if(214===e)return s(4);if(215===e)return s(8);if(216===e)return s(16);if(217===e)return a(-1,1);if(218===e)return a(-1,2);if(219===e)return a(-1,4);if(220===e)return c(-1,2);if(221===e)return c(-1,4);if(222===e)return l(-1,2);if(223===e)return l(-1,4);if(e>=224&&e<=255)return e-256;throw new Error("Matched no byte code. Value is "+e+". This should never happen.")}function i(e){let n=0,i=!0;for(;e-- >0;)if(i){let e=r[t++];n+=127&e,128&e&&(n-=128),i=!1}else n*=256,n+=r[t++];return n}function o(e){let n=0;for(;e-- >0;)n*=256,n+=r[t++];return n}function f(e){const n=new DataView(r.buffer,t,e);return t+=e,4===e?n.getFloat32(0,!1):8===e?n.getFloat64(0,!1):void 0}function u(e,n){e<0&&(e=readUint(n));const i=r.subarray(t,t+e);return t+=e,i}function l(e,r){e<0&&(e=o(r));const t={};for(;e-- >0;){t[n()]=n()}return t}function c(e,r){e<0&&(e=o(r));const t=[];for(;e-- >0;)t.push(n());return t}function a(e,n){e<0&&(e=o(n));const i=t;return t+=e,function(e,r,t){let n=r,i="";t+=r;for(;n<t;){let r=e[n++];if(r>127)if(r>191&&r<224){if(n>=t)throw new Error("UTF-8 decode: incomplete 2-byte sequence");r=(31&r)<<6|63&e[n++]}else if(r>223&&r<240){if(n+1>=t)throw new Error("UTF-8 decode: incomplete 3-byte sequence");r=(15&r)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(r>239&&r<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+r.toString(16)+" at index "+(n-1));if(n+2>=t)throw new Error("UTF-8 decode: incomplete 4-byte sequence");r=(7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}if(r<=65535)i+=String.fromCharCode(r);else{if(!(r<=1114111))throw new Error("UTF-8 decode: code point 0x"+r.toString(16)+" exceeds UTF-16 reach");r-=65536,i+=String.fromCharCode(r>>10|55296),i+=String.fromCharCode(1023&r|56320)}}return i}(r,i,e)}function s(r,t){r<0&&(r=o(t));const n=o(1),i=u(r);return 255===n?function(r){if(4===r.length)return new Date(1e3*((r[0]<<24>>>0)+(r[1]<<16>>>0)+(r[2]<<8>>>0)+r[3]));if(8===r.length){const t=(r[0]<<22>>>0)+(r[1]<<14>>>0)+(r[2]<<6>>>0)+(r[3]>>>2),n=(3&r[3])*e+(r[4]<<24>>>0)+(r[5]<<16>>>0)+(r[6]<<8>>>0)+r[7];return new Date(1e3*n+t/1e6)}if(12===r.length){const t=(r[0]<<24>>>0)+(r[1]<<16>>>0)+(r[2]<<8>>>0)+r[3],n=(r[4]<<24>>>0)+(r[5]<<16>>>0)+(r[6]<<8>>>0)+r[7],i=(r[8]<<24>>>0)+(r[9]<<16>>>0)+(r[10]<<8>>>0)+r[11],o=n*e+i;return new Date(1e3*o+t/1e6)}throw new Error("Invalid data length for a date value.")}(i):{type:n,data:i}}};"undefined"!=typeof module?module.exports={encode:r,decode:t}:this.msgpack={encode:r,decode:t}}